<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Faturas - EGS Energia</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Pyodide -->
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.1/full/pyodide.js"></script>

    <!-- html2pdf.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <!-- JSZip -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

    <!-- Tailwind CSS (via CDN para garantir compatibilidade com classes utilitárias) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#0071E3',
                        secondary: '#86868B',
                        success: '#34C759',
                        warning: '#FF9F0A',
                        danger: '#FF3B30',
                        background: '#F5F5F7',
                        card: '#FFFFFF',
                        text: '#1D1D1F',
                        'text-muted': '#86868B',
                        border: '#D2D2D7'
                    },
                    fontFamily: {
                        sans: ['-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        /* Apple-like Design System Overrides */
        :root {
            --bg-body: #F5F5F7;
            --bg-card: #FFFFFF;
            --text-primary: #1D1D1F;
            --text-secondary: #86868B;
            --accent-color: #0071E3;
            --accent-hover: #0077ED;

            --radius-lg: 18px;
            --radius-md: 12px;

            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.04);
            --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.06);

            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        body {
            background-color: var(--bg-body);
            color: var(--text-primary);
            -webkit-font-smoothing: antialiased;
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            border: 1px solid rgba(0, 0, 0, 0.02);
            padding: 32px;
            transition: var(--transition);
        }

        .card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 22px;
            border-radius: 999px;
            /* Pill shape */
            font-weight: 500;
            font-size: 14px;
            transition: var(--transition);
            cursor: pointer;
            border: none;
            outline: none;
        }

        .btn-primary {
            background: var(--accent-color);
            color: white;
            box-shadow: 0 4px 12px rgba(0, 113, 227, 0.3);
        }

        .btn-primary:hover:not(:disabled) {
            background: var(--accent-hover);
            box-shadow: 0 6px 16px rgba(0, 113, 227, 0.4);
            transform: scale(1.02);
        }

        .btn-secondary {
            background: rgba(0, 0, 0, 0.05);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background: rgba(0, 0, 0, 0.08);
        }

        /* Inputs */
        .input {
            width: 100%;
            padding: 12px 16px;
            border-radius: var(--radius-md);
            border: 1px solid #D2D2D7;
            background: rgba(255, 255, 255, 0.8);
            font-size: 15px;
            color: var(--text-primary);
            transition: var(--transition);
        }

        .input:focus {
            border-color: var(--accent-color);
            box-shadow: 0 0 0 4px rgba(0, 113, 227, 0.15);
            outline: none;
            background: #fff;
        }

        /* Navigation Tabs */
        .nav-link {
            padding: 10px 20px;
            border-radius: 999px;
            font-weight: 500;
            color: var(--text-secondary);
            transition: var(--transition);
            text-decoration: none;
        }

        .nav-link:hover {
            color: var(--text-primary);
            background: rgba(0, 0, 0, 0.03);
        }

        .nav-link.active {
            color: var(--text-primary);
            background: #fff;
            box-shadow: var(--shadow-sm);
            font-weight: 600;
        }

        /* Drop Zone */
        .drop-zone {
            border: 2px dashed #D2D2D7;
            border-radius: var(--radius-lg);
            padding: 40px;
            text-align: center;
            transition: var(--transition);
            background: #FAFAFA;
            cursor: pointer;
        }

        .drop-zone:hover,
        .drop-zone.drop-active {
            border-color: var(--accent-color);
            background: rgba(0, 113, 227, 0.05);
        }

        /* Loader */
        .loader {
            width: 24px;
            height: 24px;
            border: 3px solid rgba(0, 113, 227, 0.3);
            border-radius: 50%;
            border-top-color: var(--accent-color);
            animation: spin 0.8s linear infinite;
            display: inline-block;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body class="bg-background text-text font-sans antialiased">
    <!-- Container Principal -->
    <div id="app" class="min-h-screen flex flex-col">
        <!-- Header -->
        <header class="bg-white/80 backdrop-blur-md border-b border-border sticky top-0 z-30">
            <div class="container mx-auto px-4 py-4">
                <div class="flex items-center justify-between">
                    <!-- Logo -->
                    <div class="flex items-center space-x-3">
                        <svg class="h-8 w-auto" viewBox="0 0 200 50" fill="#1D1D1F" xmlns="http://www.w3.org/2000/svg">
                            <text x="5" y="35" font-family="-apple-system, sans-serif" font-size="30"
                                font-weight="700">EGS</text>
                            <text x="70" y="35" font-family="-apple-system, sans-serif" font-size="30"
                                font-weight="300">energia</text>
                        </svg>
                    </div>

                    <!-- Navegação -->
                    <nav id="main-nav" class="hidden md:flex space-x-2 bg-gray-100/50 p-1 rounded-full">
                        <a href="#/processador" class="nav-link" data-route="/processador">
                            Processador
                        </a>
                        <a href="#/gerador" class="nav-link" data-route="/gerador">
                            Gerador
                        </a>
                        <a href="#/corretor" class="nav-link" data-route="/corretor">
                            Corretor
                        </a>
                    </nav>

                    <!-- Menu Mobile -->
                    <button id="mobile-menu-btn" class="md:hidden text-text p-2">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>

                <!-- Menu Mobile Expandido -->
                <nav id="mobile-nav" class="hidden md:hidden mt-4 space-y-2 pb-4">
                    <a href="#/processador" class="block nav-link" data-route="/processador">Processador</a>
                    <a href="#/gerador" class="block nav-link" data-route="/gerador">Gerador</a>
                    <a href="#/corretor" class="block nav-link" data-route="/corretor">Corretor</a>
                </nav>
            </div>
        </header>

        <!-- Conteúdo Principal -->
        <main id="main-content" class="flex-grow container mx-auto px-4 py-8">
            <!-- O conteúdo será carregado dinamicamente aqui -->
        </main>

        <!-- Footer -->
        <footer class="bg-white border-t border-border mt-auto">
            <div class="container mx-auto px-4 py-8">
                <div class="flex flex-col md:flex-row items-center justify-between space-y-4 md:space-y-0">
                    <div class="text-sm text-text-muted">
                        © 2025 EGS Energia. Todos os direitos reservados.
                    </div>
                    <div class="flex items-center space-x-6 text-sm">
                        <a href="mailto:atendimento@egsenergia.com.br"
                            class="flex items-center text-text-muted hover:text-primary transition-colors">
                            <i class="fas fa-envelope mr-2"></i>
                            atendimento@egsenergia.com.br
                        </a>
                        <a href="https://wa.me/5511996703826" target="_blank"
                            class="flex items-center text-text-muted hover:text-success transition-colors">
                            <i class="fab fa-whatsapp mr-2"></i>
                            (11) 99670-3826
                        </a>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay"
        class="fixed inset-0 bg-white/90 backdrop-blur-sm flex flex-col items-center justify-center z-50">
        <div class="loader"></div>
        <p id="loading-status" class="mt-4 text-gray-700 font-medium">Carregando ambiente...</p>
    </div>

    <!-- Progress Overlay -->
    <div id="progress-overlay"
        class="fixed inset-0 bg-white/90 backdrop-blur-sm flex flex-col items-center justify-center z-40 hidden">
        <div class="w-64 bg-gray-200 rounded-full h-2 mb-4 overflow-hidden">
            <div id="progress-bar" class="bg-primary h-full rounded-full transition-all duration-300" style="width: 0%">
            </div>
        </div>
        <p id="progress-status" class="text-gray-700 font-medium"></p>
        <p id="progress-detail" class="text-gray-500 text-sm mt-2"></p>
    </div>

    <!-- Notification Container -->
    <div id="notification-container" class="fixed top-4 right-4 z-50 space-y-3 pointer-events-none"></div>

    <!-- Scripts -->
    <script type="module" src="/src/main.js"></script>
</body>

</html>